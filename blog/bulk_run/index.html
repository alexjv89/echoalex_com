<!DOCTYPE html>
<html>

  <head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">


    <!-- Site Properties -->
    <title>Bulk run command line scripts</title>

    <link rel="stylesheet" href="/assets/sematic/semantic.min.css">
    <style type="text/css">

      .hidden.menu {
        display: none;
      }

      .masthead.segment {
        min-height: 500px;
        padding: 1em 0em;
      }
      .masthead .logo.item img {
        margin-right: 1em;
      }
      .masthead .ui.menu .ui.button {
        margin-left: 0.5em;
      }
      .masthead h1.ui.header {
        margin-top: 4em;
        margin-bottom: 0em;
        font-size: 3em;
        /*color:#3f3c3d;*/
        text-shadow: 0.04em 0.04em 0.04em rgba(0,0,0,0.25);
        font-weight: normal;
      }
      .masthead h2 {
        font-size: 1.7em;
        font-weight: normal;
      }

      .ui.vertical.stripe {
        padding: 5em 0em;
      }
      .ui.vertical.stripe h3 {
        font-size: 2em;
      }
      .ui.vertical.stripe .button + h3,
      .ui.vertical.stripe p + h3 {
        margin-top: 3em;
      }
      .ui.vertical.stripe .floated.image {
        clear: both;
      }
      .ui.vertical.stripe p {
        font-size: 1.33em;
      }
      .ui.vertical.stripe ul {
        font-size: 1.33em;
      }
      .ui.vertical.stripe li {
        line-height: 1.4285em;
      }
      .ui.vertical.stripe .horizontal.divider {
        margin: 3em 0em;
      }

      .quote.stripe.segment {
        padding: 0em;
      }
      .quote.stripe.segment .grid .column {
        padding-top: 5em;
        padding-bottom: 5em;
      }

      .footer.segment {
        padding: 5em 0em;
      }

      .secondary.pointing.menu .toc.item {
        display: none;
      }

      @media only screen and (max-width: 700px) {
        /*.ui.fixed.menu {
          display: none !important;
        }*/
        .secondary.pointing.menu .item,
        .secondary.pointing.menu .menu {
          display: none;
        }
        .secondary.pointing.menu .toc.item {
          display: block;
        }
        .masthead.segment {
          min-height: 350px;

        }
        .masthead h1.ui.header {
          font-size: 2em;
          margin-top: 1.5em;
        }
        .masthead h2 {
          margin-top: 0.5em;
          font-size: 1.5em;
        }
        .segment h2{
          color: #00296b;
        }
      }


    </style>
      <script src="/assets/jquery.min.js"></script>
      <script src="/assets/sematic/semantic.min.js"></script>
    <script>
    $(document)
      .ready(function() {


        // create sidebar and attach to menu open
        $('.ui.sidebar')
          .sidebar('attach events', '.toc.item')
        ;
        $('.ui.accordion').accordion();
        $('img').addClass('ui').addClass('image');
      })
    ;
    </script>

  </head>
  <body>
    
    <!-- Sidebar Menu -->
    <div class="ui vertical inverted sidebar menu">
      <a class="item" href='/'>Home</a>
      <!-- <a class="item" href='/about/'>About</a> -->
      <a class="item" href='/blog/'>Blog</a>
      <a class="item" href='/projects/'>Projects</a>
      <a class="item" href='/now/'>Now</a>
    </div>
    <!-- Page Contents -->
    <div class="pusher">
      <div class="ui large top fixed secondary pointing menu" style="background: rgba(255,255,255,1)">
        <div class="ui container" style="font-size: 16px">
          <a class="toc item">
            <i class="sidebar icon"></i>
          </a>
          <div class='center menu'>
            <a class="item" href='/'>Home</a>
            <!-- <a class="item" href='/about/'>About</a> -->
            <a class="item" href='/blog/'>Blog</a>
            <a class="item" href='/projects/'>Projects</a>
              
            <a class="item" href='/now/'>Now</a>
          </div>
          
        </div>
      </div>
      <!-- <div class="ui inverted vertical center aligned segment" style='background: #7cacda;'>
        <div class="ui container">
          <div class="ui large secondary inverted pointing menu">
            <a class="toc item">
              <i class="sidebar icon"></i>
            </a>
            <div class="right item">
              <a class="ui inverted button" href='/login'>Log in</a>
              &nbsp;
              <a class="ui inverted button" href="/getting_started">Get Started</a>
            </div>
          </div>
        </div>
      </div> -->
      Bulk run command line scripts
      TEST
      <br>
<br>
<br>
<div class='ui container'>
	
	<div class='ui centered stackable grid'>
		<div class='ten wide large screen twelve wide computer forteen wide tablet column'>
			<div class='ui basic segment' style="font-size: 18px;line-height: 1.5em">
				<h1>Bulk run command line scripts</h1>
<p>Sometimes when migrating data, we need to run a set of jobs in sequence. Sometimes we define a data engineering job to be atomic and expect to run a set of these jobs one by one in the terminal. Sure you can manually run it in the terminal. This library helps you run a series of jobs one by one and marks them as done if they executed successfully.</p>
<p>E.g. Lets you have a job that fetchs data from db1 and moves them to db2. You have defined the script to fetch data from db1 one day at a time. This is for moving managable size of data and also so that you can recover from failures easily.</p>
<pre><code>node move_data.js --date='2023-11-01'
</code></pre>
<p>The code above fetches data for november 1st and moves it to db2. You have an automated job that runs every 5 mins that fetchs today's data(subsitute the date with today's date). Great. Something happened in your db2, maybe the structure changed, maybe there is data missing. You want to re-fetch the data for the last 30 days again.</p>
<ul>
<li>do you write a new temporary script to do that?</li>
<li>do you execute the job 30 times with different data variables</li>
</ul>
<p>If you chose option 2, this library is for you.</p>
<pre><code class="language-shell"># run the following commands in terminal
node move_data.js --date='2023-11-01'
node move_data.js --date='2023-11-02'
node move_data.js --date='2023-11-03'
node move_data.js --date='2023-11-04'
node move_data.js --date='2023-11-05'
node move_data.js --date='2023-11-06'
node move_data.js --date='2023-11-07'
node move_data.js --date='2023-11-08'
node move_data.js --date='2023-11-09'
node move_data.js --date='2023-11-10'
node move_data.js --date='2023-11-11'
node move_data.js --date='2023-11-12'
node move_data.js --date='2023-11-13'
node move_data.js --date='2023-11-14'
node move_data.js --date='2023-11-15'
node move_data.js --date='2023-11-16'
node move_data.js --date='2023-11-17'
node move_data.js --date='2023-11-18'
node move_data.js --date='2023-11-19'
node move_data.js --date='2023-11-20'
node move_data.js --date='2023-11-21'
node move_data.js --date='2023-11-22'
node move_data.js --date='2023-11-23'
node move_data.js --date='2023-11-24'
node move_data.js --date='2023-11-25'
node move_data.js --date='2023-11-26'
node move_data.js --date='2023-11-27'
node move_data.js --date='2023-11-28'
node move_data.js --date='2023-11-29'
node move_data.js --date='2023-11-30'

</code></pre>
<p>You can run this in your terminal. Terminal executes this and in an ideal world everything is good. Your job is done. But wait, what if your database got overloaded and failed for a few scripts. What if you lost internet connection during execution for few of the scripts. You just have to rerun the script, but keeping track of what failed and what worked is a lot of manual work. This library does that for you.</p>
<p>Store this in a file as config.txt</p>
<pre><code class="language-shell">node move_data.js --date='2023-11-01' # run
node move_data.js --date='2023-11-02' # run
node move_data.js --date='2023-11-03' # run
node move_data.js --date='2023-11-04' # run
node move_data.js --date='2023-11-05' # run
node move_data.js --date='2023-11-06' # run
node move_data.js --date='2023-11-07' # run
node move_data.js --date='2023-11-08' # run
node move_data.js --date='2023-11-09' # run
node move_data.js --date='2023-11-10' # run
node move_data.js --date='2023-11-11' # run
node move_data.js --date='2023-11-12' # run
node move_data.js --date='2023-11-13' # run
node move_data.js --date='2023-11-14' # run
node move_data.js --date='2023-11-15' # run
node move_data.js --date='2023-11-16' # run
node move_data.js --date='2023-11-17' # run
node move_data.js --date='2023-11-18' # run
node move_data.js --date='2023-11-19' # run
node move_data.js --date='2023-11-20' # run
node move_data.js --date='2023-11-21' # run
node move_data.js --date='2023-11-22' # run
node move_data.js --date='2023-11-23' # run
node move_data.js --date='2023-11-24' # run
node move_data.js --date='2023-11-25' # run
node move_data.js --date='2023-11-26' # run
node move_data.js --date='2023-11-27' # run
node move_data.js --date='2023-11-28' # run
node move_data.js --date='2023-11-29' # run
node move_data.js --date='2023-11-30' # run
</code></pre>
<p>Run the following
<code>npx bulkrun config.txt</code></p>
<p>All the line items in the <code>config.txt</code> file will be executed and the status will be updated against the line.</p>
<h2>Expected output</h2>
<ul>
<li>run - if the line is not executed</li>
<li>done - if the line was executed without failure</li>
<li>failed - if the execution of the line</li>
</ul>
<p>What you can expect the config to be after it is run</p>
<pre><code class="language-shell">node move_data.js --date='2023-11-01' # done
node move_data.js --date='2023-11-02' # done
node move_data.js --date='2023-11-03' # failed
node move_data.js --date='2023-11-04' # done
node move_data.js --date='2023-11-05' # done
node move_data.js --date='2023-11-06' # done
node move_data.js --date='2023-11-07' # done
node move_data.js --date='2023-11-08' # done
node move_data.js --date='2023-11-09' # done
node move_data.js --date='2023-11-10' # failed
node move_data.js --date='2023-11-11' # failed
node move_data.js --date='2023-11-12' # failed
node move_data.js --date='2023-11-13' # done
node move_data.js --date='2023-11-14' # run
node move_data.js --date='2023-11-15' # run
node move_data.js --date='2023-11-16' # run
node move_data.js --date='2023-11-17' # run
node move_data.js --date='2023-11-18' # run
node move_data.js --date='2023-11-19' # run
node move_data.js --date='2023-11-20' # run
node move_data.js --date='2023-11-21' # run
node move_data.js --date='2023-11-22' # run
node move_data.js --date='2023-11-23' # run
node move_data.js --date='2023-11-24' # run
node move_data.js --date='2023-11-25' # run
node move_data.js --date='2023-11-26' # run
node move_data.js --date='2023-11-27' # run
node move_data.js --date='2023-11-28' # run
node move_data.js --date='2023-11-29' # run
node move_data.js --date='2023-11-30' # run
</code></pre>

			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	if(window.location.pathname.indexOf('/blog/')>-1){
		$('a[href="/blog/"]').addClass('active');
	}
</script>
    </div>




    <!--
        Client-side Templates
        ========================

        HTML templates are important prerequisites of modern, rich client applications.
        To work their magic, frameworks like React, Vue.js, Angular, Ember, and Backbone
        require that you load these templates client-side.

        By default, your Gruntfile is configured to automatically load and precompile
        client-side JST templates in your `assets/templates` folder, then
        include them here automatically (between TEMPLATES and TEMPLATES END).

        To customize this behavior to fit your needs, just edit `tasks/pipeline.js`.
        For example, here are a few things you could do:

            + Import templates from other directories
            + Use a different view engine (handlebars, dust, pug/jade, etc.)
            + Internationalize your client-side templates using a server-side
              stringfile before they're served.
    -->

    <!--TEMPLATES-->
    <!--TEMPLATES END-->


    <!--
        Server-side View Locals
        ========================

        Sometimes, it's convenient to get access to your server-side view locals from
        client-side JavaScript.  This can improve page load times, remove the need for
        extra AJAX requests, and make your client-side code easier to understand and
        to maintain.  Sails provides a simple mechanism for accessing dynamic view
        locals: the "exposeLocalsToBrowser()" view partial.

        For more information on using this built-in feature, see:
        https://sailsjs.com/docs/concepts/views/locals#?escaping-untrusted-data-using-exposelocalstobrowser

    -->


    <!--

      Client-side Javascript
      ========================

      You can always bring in JS files manually with `script` tags, or asynchronously
      on the client using a solution like AMD (RequireJS).  Or, if you like, you can
      take advantage of Sails' conventional asset pipeline (boilerplate Gruntfile).

      By default, files in your `assets/js` folder are included here
      automatically (between SCRIPTS and SCRIPTS END).  Both JavaScript (.js) and
      CoffeeScript (.coffee) are supported. In production, your scripts will be minified
      and concatenated into a single file.

      To customize any part of the built-in behavior, just edit `tasks/pipeline.js`.
      For example, here are a few things you could do:

          + Change the order of your scripts
          + Import scripts from other directories
          + Use a different preprocessor, like TypeScript

    -->


    <script src="/assets/sails.io.js"></script>
    <script src="/assets/jquery.min.js"></script>
    <script src="/assets/sematic/semantic.min.js"></script>

    <script type="text/javascript">
      $(document).ready(function(){
        var path = window.location.pathname;
        console.log(path.split('/'));
        
        $('a[href="'+path+'"]').addClass('active');
        $('.dropdown').dropdown();
        // if(path.split('/')[1]=='features')
        //   $('#features').addClass('active');
        // $('.click-sidebar').click(function(){
        //   $('.ui.sidebar').sidebar('toggle');
        // })
        // $('.inline.dropdown').dropdown();
      });
    </script>
  </body>
</html>